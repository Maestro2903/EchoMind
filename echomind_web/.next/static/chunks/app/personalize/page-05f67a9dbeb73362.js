(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{2558:function(e,t,r){Promise.resolve().then(r.bind(r,8413))},8413:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),s=r(2265),l=r(9763);let i=(0,l.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),n=(0,l.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var o=r(875),d=r(1784);function c(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),[h,m]=(0,s.useState)(""),[x,p]=(0,s.useState)(!0),[f,g]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{p(!0);let e=await (0,d.Yz)();if(t(e),e.length>0){let t=e.find(e=>0===e.is_default)||e[0];l(t),m(t.prompt)}}catch(e){console.error("Failed to fetch presets:",e)}finally{p(!1)}})()},[]);let w=e=>{(!y||window.confirm("You have unsaved changes. Are you sure you want to switch?"))&&(l(e),m(e.prompt),b(!1))},v=async()=>{if(r&&!f&&y){if(1===r.is_default){alert("Default presets cannot be modified.");return}try{g(!0),await (0,d.sZ)(r.id,{title:r.title,prompt:h}),t(e=>e.map(e=>e.id===r.id?{...e,prompt:h}:e)),b(!1)}catch(e){console.error("Save failed:",e),alert("Failed to save preset. See console for details.")}finally{g(!1)}}},N=async()=>{let e=prompt("Enter a title for the new preset:");if(e)try{g(!0);let{id:r}=await (0,d.lx)({title:e,prompt:"Enter your custom prompt here..."}),a={id:r,uid:"current_user",title:e,prompt:"Enter your custom prompt here...",is_default:0,created_at:Date.now(),sync_state:"clean"};t(e=>[...e,a]),l(a),m(a.prompt),b(!1)}catch(e){console.error("Failed to create preset:",e),alert("Failed to create preset. See console for details.")}finally{g(!1)}},j=async()=>{if(!r)return;let e=prompt("Enter a title for the duplicated preset:","".concat(r.title," (Copy)"));if(e)try{g(!0);let{id:r}=await (0,d.lx)({title:e,prompt:h}),a={id:r,uid:"current_user",title:e,prompt:h,is_default:0,created_at:Date.now(),sync_state:"clean"};t(e=>[...e,a]),l(a),b(!1)}catch(e){console.error("Failed to duplicate preset:",e),alert("Failed to duplicate preset. See console for details.")}finally{g(!1)}};return x?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Loading..."})}):(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-100",children:(0,a.jsx)("div",{className:"px-8 pt-8 pb-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Presets"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Personalize"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:N,disabled:f,className:"px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(i,{className:"h-4 w-4"}),"New Preset"]}),r&&(0,a.jsxs)("button",{onClick:j,disabled:f,className:"px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(n,{className:"h-4 w-4"}),"Duplicate"]}),(0,a.jsx)("button",{onClick:v,disabled:f||!y||(null==r?void 0:r.is_default)===1,className:"px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat(y||f?f?"bg-gray-400 text-white cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-500 text-white cursor-default"),children:y||f?f?"Saving...":"Save":"Saved"})]})]})})}),(0,a.jsx)("div",{className:"transition-colors duration-300 ".concat(c?"bg-gray-50":"bg-white"),children:(0,a.jsxs)("div",{className:"px-8 py-6",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("button",{onClick:()=>u(!c),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 text-sm font-medium transition-colors",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 transition-transform duration-200 ".concat(c?"rotate-180":"")}),c?"Hide Presets":"Show Presets"]})}),c&&(0,a.jsx)("div",{className:"grid grid-cols-5 gap-4 mb-6",children:e.map(e=>(0,a.jsxs)("div",{onClick:()=>w(e),className:"\n                    p-4 rounded-lg cursor-pointer transition-all duration-200 bg-white\n                    h-48 flex flex-col shadow-sm hover:shadow-md relative\n                    ".concat((null==r?void 0:r.id)===e.id?"border-2 border-blue-500 shadow-md":"border border-gray-200 hover:border-gray-300","\n                  "),children:[1===e.is_default&&(0,a.jsx)("div",{className:"absolute top-2 right-2 bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"Default"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-3 text-center text-sm",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed flex-1 overflow-hidden",children:e.prompt.substring(0,100)+(e.prompt.length>100?"...":"")})]},e.id))})]})}),(0,a.jsx)("div",{className:"flex-1 bg-white",children:(0,a.jsxs)("div",{className:"h-full px-8 py-6 flex flex-col",children:[(null==r?void 0:r.is_default)===1&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-yellow-400 rounded-full"}),(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:"This is a default preset and cannot be edited."}),'Use the "Duplicate" button above to create an editable copy, or create a new preset.']})]})}),(0,a.jsx)("textarea",{value:h,onChange:e=>{m(e.target.value),b(!0)},className:"w-full flex-1 text-sm text-gray-900 border-0 resize-none focus:outline-none bg-transparent font-mono leading-relaxed",placeholder:"Select a preset or type directly...",readOnly:(null==r?void 0:r.is_default)===1})]})})]})}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{color:n="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:u="",children:h,...m}=r;return(0,a.createElement)("svg",{ref:i,...s,width:o,height:o,stroke:n,strokeWidth:c?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat(l(e)),u].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r}},875:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])}},function(e){e.O(0,[358,990,915,784,971,117,744],function(){return e(e.s=2558)}),_N_E=e.O()}]);