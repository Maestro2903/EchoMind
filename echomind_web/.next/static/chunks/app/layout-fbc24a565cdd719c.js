(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5936:function(e,t,a){Promise.resolve().then(a.bind(a,1551)),Promise.resolve().then(a.t.bind(a,4742,23)),Promise.resolve().then(a.t.bind(a,7960,23))},1551:function(e,t,a){"use strict";a.d(t,{default:function(){return v}});var n=a(7437),s=a(2265),l=a(7648),i=a(9376),r=a(3145),o=a(875),c=a(7692),d=a(1784),u=a(6265);let x={SIDEBAR:500,TEXT:300,SUBMENU:500,ICON_HOVER:200,COLOR_TRANSITION:200,HOVER_SCALE:200},m=e=>{let[t,a]=(0,s.useState)(!1);(0,s.useEffect)(()=>{a(!0);let e=setTimeout(()=>a(!1),x.SIDEBAR);return()=>clearTimeout(e)},[e]);let n=(0,s.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{willChange:"opacity",transition:"opacity ".concat(x.TEXT,"ms ease-out"),transitionDelay:"".concat(t,"ms"),opacity:e?0:1,pointerEvents:e?"none":"auto"}},[e]),l=(0,s.useCallback)(t=>({willChange:"opacity, max-height",transition:"all ".concat(x.SUBMENU,"ms cubic-bezier(0.25, 0.46, 0.45, 0.94)"),maxHeight:e||!t?"0px":"400px",opacity:e||!t?0:1}),[e]);return{isAnimating:t,getTextAnimationStyle:n,getSubmenuAnimationStyle:l,sidebarContainerStyle:(0,s.useMemo)(()=>({willChange:"width",transition:"width ".concat(x.SIDEBAR,"ms cubic-bezier(0.4, 0, 0.2, 1)")}),[]),getTextContainerStyle:(0,s.useCallback)(()=>({width:e?"0px":"150px",overflow:"hidden",transition:"width ".concat(x.SIDEBAR,"ms cubic-bezier(0.4, 0, 0.2, 1)")}),[e]),getUniformTextStyle:(0,s.useCallback)(()=>({willChange:"opacity",opacity:e?0:1,transition:"opacity 300ms ease ".concat(e?"0ms":"200ms"),whiteSpace:"nowrap"}),[e])}},h=(0,s.memo)(e=>{let{icon:t,isLucide:a,alt:l,className:i="h-[18px] w-[18px] transition-transform duration-200"}=e;return a?(0,s.createElement)(t,{className:i,"aria-hidden":!0}):(0,n.jsx)(r.default,{src:t,alt:l,width:18,height:18,className:i,loading:"lazy"})});h.displayName="IconComponent";let f=(0,s.memo)(e=>{let{isCollapsed:t,onToggle:a,onSearchClick:f}=e,p=(0,i.usePathname)(),g=(0,i.useRouter)(),[b,y]=(0,s.useState)(p.startsWith("/settings")),{user:v,isLoading:j}=(0,u.a)(),[N,w]=(0,s.useState)(null),{isAnimating:k,getTextAnimationStyle:C,getSubmenuAnimationStyle:S,sidebarContainerStyle:L,getTextContainerStyle:E,getUniformTextStyle:O}=m(t);(0,s.useEffect)(()=>{(0,d.ud)().then(e=>w(e.hasApiKey)).catch(e=>{console.error("Failed to check API key status:",e),w(null)})},[]),(0,s.useEffect)(()=>{p.startsWith("/settings")&&y(!0)},[p]);let _=(0,s.useMemo)(()=>[{name:"Search",action:f,icon:"/search.svg",isLucide:!1,ariaLabel:"Open search"},{name:"My Activity",href:"/activity",icon:"/activity.svg",isLucide:!1,ariaLabel:"View my activity"},{name:"Personalize",href:"/personalize",icon:"/book.svg",isLucide:!1,ariaLabel:"Personalization settings"},{name:"Settings",href:"/settings",icon:"/setting.svg",isLucide:!1,hasSubmenu:!0,ariaLabel:"Settings menu"}],[f]),D=(0,s.useMemo)(()=>[{name:"Personal Profile",href:"/settings",icon:"/user.svg",isLucide:!1,ariaLabel:"Personal profile settings"}],[]);(0,s.useMemo)(()=>[],[]);let R=(0,s.useCallback)(()=>{a(!t)},[t,a]),I=(0,s.useCallback)(()=>{p.startsWith("/settings")||y(e=>!e)},[p]),T=(0,s.useCallback)(async()=>{try{await (0,d.kS)()}catch(e){console.error("An error occurred during logout:",e)}},[]),A=(0,s.useCallback)((e,t)=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==t||t())},[]),U=(0,s.useCallback)((e,a)=>{let s=!!e.href&&p.startsWith(e.href),i="\n      group flex items-center rounded-[8px] px-[12px] py-[10px] text-[14px] text-[#282828] w-full relative\n      transition-colors duration-".concat(x.COLOR_TRANSITION," ease-out\n      focus:outline-none\n    "),r=e=>e?"bg-[#f2f2f2] text-[#282828]":"text-[#282828] hover:text-[#282828] hover:bg-[#f7f7f7]";return e.action?(0,n.jsx)("li",{children:(0,n.jsxs)("button",{onClick:e.action,onKeyDown:t=>A(t,e.action),className:"".concat(i," ").concat(r(!1)),title:t?e.name:void 0,"aria-label":e.ariaLabel||e.name,style:{willChange:"background-color, color"},children:[(0,n.jsx)("div",{className:"shrink-0 flex items-center justify-center w-5 h-5",children:(0,n.jsx)(h,{icon:e.icon,isLucide:e.isLucide,alt:"".concat(e.name," icon")})}),(0,n.jsx)("div",{className:"ml-[12px] overflow-hidden",style:E(),children:(0,n.jsx)("span",{className:"block text-left",style:O(),children:e.name})})]})},e.name):e.hasSubmenu?(0,n.jsxs)("li",{children:[(0,n.jsxs)("button",{onClick:I,onKeyDown:e=>A(e,I),className:"".concat(i," ").concat(r(s)),title:t?e.name:void 0,"aria-label":e.ariaLabel||e.name,"aria-expanded":b,"aria-controls":"settings-submenu",style:{willChange:"background-color, color"},children:[(0,n.jsx)("div",{className:"shrink-0 flex items-center justify-center w-5 h-5",children:(0,n.jsx)(h,{icon:e.icon,isLucide:e.isLucide,alt:"".concat(e.name," icon")})}),(0,n.jsxs)("div",{className:"ml-[12px] overflow-hidden flex items-center",style:E(),children:[(0,n.jsx)("span",{className:"flex-1 text-left",style:O(),children:e.name}),(0,n.jsx)(o.Z,{className:"h-3 w-3 ml-1.5 shrink-0","aria-hidden":"true",style:{willChange:"transform, opacity",transition:"all ".concat(x.HOVER_SCALE,"ms cubic-bezier(0.4, 0, 0.2, 1)"),transform:"rotate(".concat(b?180:0,"deg) ").concat(t?"scale(0)":"scale(1)"),opacity:t?0:1}})]})]}),(0,n.jsx)("div",{id:"settings-submenu",className:"overflow-hidden",style:S(b),role:"region","aria-labelledby":"settings-button",children:(0,n.jsxs)("ul",{className:"mt-[4px] space-y-0 pl-[22px]",role:"menu",children:[D.map((e,t)=>(0,n.jsx)("li",{role:"none",children:(0,n.jsxs)(l.default,{href:e.href,className:"\n                                  group flex items-center rounded-lg px-[12px] py-[8px] text-[13px] gap-x-[9px]\n                      focus:outline-none\n                                  ".concat(p===e.href?"bg-subtle-active-bg text-[#282828]":"text-[#282828] hover:text-[#282828] hover:bg-[#f7f7f7]","\n                      transition-colors duration-").concat(x.COLOR_TRANSITION," ease-out\n                                "),style:{willChange:"background-color, color"},role:"menuitem","aria-label":e.ariaLabel||e.name,children:[(0,n.jsx)(h,{icon:e.icon,isLucide:e.isLucide,alt:"".concat(e.name," icon"),className:"h-4 w-4 shrink-0"}),(0,n.jsx)("span",{className:"whitespace-nowrap",children:e.name})]})},e.name)),M&&(0,n.jsx)("li",{role:"none",children:(0,n.jsxs)("button",{onClick:T,onKeyDown:e=>A(e,T),className:"\n                                    group flex items-center rounded-lg px-[12px] py-[8px] text-[13px] gap-x-[9px]\n                                    text-red-600 hover:text-red-700 hover:bg-[#f7f7f7] w-full \n                                    transition-colors duration-".concat(x.COLOR_TRANSITION," ease-out\n                                    focus:outline-none\n                                  "),style:{willChange:"background-color, color"},role:"menuitem","aria-label":"Logout",children:[(0,n.jsx)(c.Z,{className:"h-4 w-4 shrink-0","aria-hidden":"true"}),(0,n.jsx)("span",{className:"whitespace-nowrap",children:"Logout"})]})})]})})]},e.name):(0,n.jsx)("li",{children:(0,n.jsxs)(l.default,{href:e.href||"#",className:"\n                        group flex items-center rounded-[8px] text-[14px] px-[12px] py-[10px] relative\n            focus:outline-none\n            ".concat(r(s),"\n            transition-colors duration-").concat(x.COLOR_TRANSITION," ease-out\n                        ").concat("","\n                      "),title:t?e.name:void 0,"aria-label":e.ariaLabel||e.name,style:{willChange:"background-color, color"},children:[(0,n.jsx)("div",{className:"shrink-0 flex items-center justify-center w-5 h-5",children:(0,n.jsx)(h,{icon:e.icon,isLucide:e.isLucide,alt:"".concat(e.name," icon")})}),(0,n.jsx)("div",{className:"ml-[12px] overflow-hidden",style:E(),children:(0,n.jsx)("span",{className:"block text-left",style:O(),children:e.name})})]})},e.name)},[p,t,b,I,T,A,O,E,S,D]),z=(0,s.useCallback)(()=>j?"Loading...":(null==v?void 0:v.display_name)||"Guest",[v,j]),K=(0,s.useCallback)(()=>j?"L":(null==v?void 0:v.display_name)?v.display_name.charAt(0).toUpperCase():"G",[v,j]),M=v&&"default_user"!==v.uid;return(0,n.jsxs)("aside",{className:"flex h-full flex-col bg-white border-r py-3 px-2 border-[#e5e5e5] relative ".concat(t?"w-[60px]":"w-[220px]"),style:L,role:"navigation","aria-label":"main navigation","aria-expanded":!t,children:[(0,n.jsx)("header",{className:"group relative h-6 flex shrink-0 items-center justify-between",children:t?(0,n.jsx)("button",{onClick:R,onKeyDown:e=>A(e,R),className:"".concat(""," text-gray-500 hover:text-gray-800 p-1 rounded-[4px] hover:bg-[#f7f7f7] h-6 w-6 transition-colors focus:outline-none"),"aria-label":"Open sidebar",children:(0,n.jsx)(r.default,{src:"/unfold.svg",alt:"Open sidebar",width:18,height:18,className:"h-4.5 w-4.5"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.default,{href:"https://echomind.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:(0,n.jsx)("span",{className:"ml-3 text-[14px] leading-none text-[#000]",children:"EchoMind"})}),(0,n.jsx)("button",{onClick:R,onKeyDown:e=>A(e,R),className:"".concat(""," text-gray-500 hover:text-gray-800 p-1 rounded-[4px] hover:bg-[#f7f7f7] h-6 w-6 transition-colors focus:outline-none"),"aria-label":"Close sidebar",children:(0,n.jsx)(r.default,{src:"/unfold.svg",alt:"Close",width:16,height:16,className:"transform rotate-180"})})]})}),(0,n.jsxs)("nav",{className:"flex flex-1 flex-col pt-8",role:"navigation","aria-label":"Main menu",children:[(0,n.jsx)("ul",{role:"list",className:"flex flex-1 flex-col",children:(0,n.jsx)("li",{children:(0,n.jsx)("ul",{role:"list",className:"",children:_.map(U)})})}),(0,n.jsx)("button",{onClick:R,onKeyDown:e=>A(e,R),className:"".concat(t?"":"opacity-0",' "absolute inset-0 flex items-center justify-center w-full h-[36px] mb-[8px] rounded-[20px] flex justify-center items-center text-gray-500 hover:text-gray-800 rounded-md scale-90 group-hover:opacity-100 group-hover:scale-100 transition-all duration-300 ease-out focus:outline-none'),"aria-label":"Open sidebar",children:(0,n.jsx)("div",{className:"w-[36px] h-[36px] flex items-center justify-center bg-[#f7f7f7] rounded-[20px]",children:(0,n.jsx)(r.default,{src:"/unfold.svg",alt:"Open",width:18,height:18,className:"h-4.5 w-4.5"})})}),!t&&null!==N&&(0,n.jsx)("div",{className:"px-2.5 py-2 text-center",children:(0,n.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(N?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:N?"Local running":"EchoMind Free System"})}),(0,n.jsx)("div",{className:"mt-[0px] flex items-center w-full h-[1px] px-[4px] mt-[8px] mb-[8px]",children:(0,n.jsx)("div",{className:"w-full h-[1px] bg-[#d9d9d9]"})}),(0,n.jsxs)("div",{className:"mt-[0px] flex items-center ".concat(t?"":"gap-x-[10px]"),style:{padding:"6px 8px",justifyContent:"flex-start",transition:"all ".concat(x.SIDEBAR,"ms cubic-bezier(0.4, 0, 0.2, 1)")},role:"region","aria-label":"User profile",children:[(0,n.jsx)("div",{className:"\n              h-[30px] w-[30px] rounded-full border border-[#8d8d8d] flex items-center justify-center text-[#282828] text-[13px] \n              shrink-0 cursor-pointer transition-all duration-".concat(x.ICON_HOVER," \n              hover:bg-[#f7f7f7] focus:outline-none\n            "),title:z(),style:{willChange:"background-color, transform"},tabIndex:0,role:"button","aria-label":"User: ".concat(z()),onKeyDown:e=>A(e,()=>{M?g.push("/settings"):g.push("/login")}),children:K()}),(0,n.jsx)("div",{className:"ml-[0px] overflow-hidden",style:E(),children:(0,n.jsx)("span",{className:"block text-[13px] leading-6 text-[#282828]",style:O(),children:z()})})]})]})]})});f.displayName="Sidebar";var p=a(3247),g=a(2489),b=a(3417);function y(e){let{isOpen:t,onClose:a}=e,[l,r]=(0,s.useState)(""),[o,c]=(0,s.useState)([]),[u,x]=(0,s.useState)(!1),m=(0,s.useRef)(null),h=(0,i.useRouter)();(0,s.useEffect)(()=>{t&&m.current&&m.current.focus()},[t]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&a()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,a]);let f=async e=>{if(!e.trim()){c([]);return}x(!0);try{let t=await (0,d.lS)(e);c(t)}catch(e){console.error("Search failed:",e),c([])}finally{x(!1)}};return t?(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-start justify-center pt-16 z-50",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex items-center px-4 py-3",children:[(0,n.jsx)(p.Z,{className:"h-5 w-5 text-gray-400 mr-3 flex-shrink-0"}),(0,n.jsx)("input",{ref:m,type:"text",value:l,onChange:e=>{let t=e.target.value;r(t),f(t)},placeholder:"Search...",className:"flex-1 text-gray-900 text-base border-0 focus:outline-none placeholder-gray-400 bg-transparent"}),(0,n.jsx)("button",{onClick:a,className:"ml-3 p-1 hover:bg-gray-100 rounded-full flex-shrink-0",children:(0,n.jsx)(g.Z,{className:"h-4 w-4 text-gray-400"})})]}),(0,n.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100",children:(0,n.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,n.jsx)("span",{children:"Type"}),(0,n.jsx)("span",{className:"mx-2 px-1.5 py-0.5 bg-white border border-gray-200 rounded text-xs font-mono",children:"#"}),(0,n.jsx)("span",{children:"to access summaries,"}),(0,n.jsx)("span",{className:"mx-2 px-1.5 py-0.5 bg-white border border-gray-200 rounded text-xs font-mono",children:"?"}),(0,n.jsx)("span",{children:"for help."})]})}),l&&(0,n.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:u?(0,n.jsxs)("div",{className:"p-6 text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-3"}),(0,n.jsx)("p",{className:"text-gray-500 text-sm",children:"Searching..."})]}):o.length>0?(0,n.jsx)("div",{className:"divide-y divide-gray-100",children:o.map(e=>{let t=new Date(1e3*e.started_at).toLocaleString();return(0,n.jsx)("div",{className:"p-3 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{h.push("/activity/".concat(e.id)),a()},children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)(b.Z,{className:"h-5 w-5 text-gray-400 mt-0.5 shrink-0"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1 truncate",children:e.title||"Untitled Conversation"}),(0,n.jsx)("div",{className:"flex items-center gap-2 mt-2",children:(0,n.jsx)("span",{className:"text-xs text-gray-500",children:t})})]})]})},e.id)})}):(0,n.jsxs)("div",{className:"p-6 text-center",children:[(0,n.jsx)(p.Z,{className:"h-8 w-8 text-gray-300 mx-auto mb-3"}),(0,n.jsxs)("p",{className:"text-gray-500 text-sm",children:['No results found for "',l,'"']})]})})]})}):null}function v(e){let{children:t}=e,[a,l]=(0,s.useState)(!1),[i,r]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),r(!0))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),(0,n.jsxs)("div",{className:"flex h-screen",children:[(0,n.jsx)(f,{isCollapsed:a,onToggle:l,onSearchClick:()=>r(!0)}),(0,n.jsx)("main",{className:"flex-1 overflow-auto bg-white",children:t}),(0,n.jsx)(y,{isOpen:i,onClose:()=>r(!1)})]})}},6265:function(e,t,a){"use strict";a.d(t,{a:function(){return c},g:function(){return d}});var n=a(2265),s=a(9376),l=a(1784),i=a(1694),r=a(3301);let o={uid:"default_user",display_name:"Default User",email:"contact@echomind.com"},c=()=>{let[e,t]=(0,n.useState)(null),[a,s]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=(0,r.Aj)(i.I8,async e=>{if(e){console.log("\uD83D\uDD25 Firebase mode activated:",e.uid),d("firebase");let a={uid:e.uid,display_name:e.displayName||"User",email:e.email||"no-email@example.com"};try{a=await (0,l.Oo)(a),console.log("✅ Firestore user created/verified:",a)}catch(e){console.error("❌ Firestore user creation/verification failed:",e)}t(a),(0,l.ps)(a)}else console.log("\uD83C\uDFE0 Local mode activated"),d("local"),t(o),(0,l.ps)(o);s(!1)});return()=>e()},[]),{user:e,isLoading:a,mode:c}},d=()=>{let{user:e,isLoading:t}=c(),a=(0,s.useRouter)();return(0,n.useEffect)(()=>{},[e,t,a]),e}},7960:function(){}},function(e){e.O(0,[540,358,990,915,448,544,784,971,117,744],function(){return e(e.s=5936)}),_N_E=e.O()}]);