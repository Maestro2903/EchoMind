(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[294],{6785:function(e,s,t){Promise.resolve().then(t.bind(t,8081))},8081:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var a=t(7437),i=t(2265),r=t(6265),n=t(9376),l=t(7648),c=t(1784);let o=e=>{let{title:s,children:t}=e;return(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:s}),(0,a.jsx)("div",{className:"text-gray-700 space-y-2",children:t})]})};function d(){let e=(0,r.g)(),[s,t]=(0,i.useState)(null),[d,m]=(0,i.useState)(!0),u=(0,n.useSearchParams)().get("sessionId"),x=(0,n.useRouter)(),[h,y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{e&&u&&(async()=>{m(!0);try{let e=await (0,c.T3)(u);t(e)}catch(e){console.error("Failed to load session details:",e)}finally{m(!1)}})()},[e,u]);let p=async()=>{if(u&&window.confirm("Are you sure you want to delete this activity? This cannot be undone.")){y(!0);try{await (0,c.SO)(u),x.push("/activity")}catch(e){alert("Failed to delete activity."),y(!1),console.error(e)}}};if(!e||d)return(0,a.jsx)("div",{className:"min-h-screen bg-[#FDFCF9] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading session details..."})]})});if(!s)return(0,a.jsx)("div",{className:"min-h-screen bg-[#FDFCF9] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-8 py-12 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-8",children:"Session Not Found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"The requested session could not be found."}),(0,a.jsx)(l.default,{href:"/activity",className:"mt-4 inline-block text-blue-600 hover:text-blue-800",children:"← Back to Activity"})]})});let j=s.ai_messages||[];return(0,a.jsx)("div",{className:"min-h-screen bg-[#FDFCF9] text-gray-800",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)(l.default,{href:"/activity",className:"text-sm text-gray-500 hover:text-gray-700 flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-md border border-gray-100",children:[(0,a.jsxs)("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.session.title||"Conversation on ".concat(new Date(1e3*s.session.started_at).toLocaleDateString())}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[(0,a.jsx)("span",{children:new Date(1e3*s.session.started_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}),(0,a.jsx)("span",{children:new Date(1e3*s.session.started_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}),(0,a.jsx)("span",{className:"capitalize px-2 py-0.5 rounded-full text-xs font-medium ".concat("listen"===s.session.session_type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:s.session.session_type})]})]}),(0,a.jsx)("button",{onClick:p,disabled:h,className:"px-4 py-2 rounded text-sm font-medium border border-red-200 text-red-700 bg-red-50 hover:bg-red-100 transition-colors ".concat(h?"opacity-50 cursor-not-allowed":""),children:h?"Deleting...":"Delete Activity"})]}),s.summary&&(0,a.jsxs)(o,{title:"Summary",children:[(0,a.jsxs)("p",{className:"text-lg italic text-gray-600 mb-4",children:['"',s.summary.tldr,'"']}),s.summary.bullet_json&&JSON.parse(s.summary.bullet_json).length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"Key Points:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:JSON.parse(s.summary.bullet_json).map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),s.summary.action_json&&JSON.parse(s.summary.action_json).length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"Action Items:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:JSON.parse(s.summary.action_json).map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})]}),s.transcripts&&s.transcripts.length>0&&(0,a.jsx)(o,{title:"Listen: Transcript",children:(0,a.jsx)("div",{className:"space-y-3",children:s.transcripts.map(e=>(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsxs)("span",{className:"font-semibold capitalize",children:[e.speaker,": "]}),e.text]},e.id))})}),j.length>0&&(0,a.jsx)(o,{title:"Ask: Q&A",children:(0,a.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg ".concat("user"===e.role?"bg-gray-100":"bg-blue-50"),children:[(0,a.jsx)("p",{className:"font-semibold capitalize text-sm text-gray-600 mb-1",children:"user"===e.role?"You":"AI"}),(0,a.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:e.content})]},e.id))})})]})]})})}function m(){return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-[#FDFCF9] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),children:(0,a.jsx)(d,{})})}},6265:function(e,s,t){"use strict";t.d(s,{a:function(){return o},g:function(){return d}});var a=t(2265),i=t(9376),r=t(1784),n=t(1694),l=t(3301);let c={uid:"default_user",display_name:"Default User",email:"contact@echomind.com"},o=()=>{let[e,s]=(0,a.useState)(null),[t,i]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=(0,l.Aj)(n.I8,async e=>{if(e){console.log("\uD83D\uDD25 Firebase mode activated:",e.uid),d("firebase");let t={uid:e.uid,display_name:e.displayName||"User",email:e.email||"no-email@example.com"};try{t=await (0,r.Oo)(t),console.log("✅ Firestore user created/verified:",t)}catch(e){console.error("❌ Firestore user creation/verification failed:",e)}s(t),(0,r.ps)(t)}else console.log("\uD83C\uDFE0 Local mode activated"),d("local"),s(c),(0,r.ps)(c);i(!1)});return()=>e()},[]),{user:e,isLoading:t,mode:o}},d=()=>{let{user:e,isLoading:s}=o(),t=(0,i.useRouter)();return(0,a.useEffect)(()=>{},[e,s,t]),e}}},function(e){e.O(0,[358,990,915,448,784,971,117,744],function(){return e(e.s=6785)}),_N_E=e.O()}]);