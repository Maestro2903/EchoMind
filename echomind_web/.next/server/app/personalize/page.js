(()=>{var e={};e.id=399,e.ids=[399],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},3809:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(8170),r(5392),r(5866);var s=r(3191),a=r(8716),i=r(7922),l=r.n(i),o=r(5231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let d=["",{children:["personalize",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8170)),"/Users/shreeshanthr/Documents/echomind 3/echomind_web/app/personalize/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5392)),"/Users/shreeshanthr/Documents/echomind 3/echomind_web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/shreeshanthr/Documents/echomind 3/echomind_web/app/personalize/page.tsx"],u="/personalize/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/personalize/page",pathname:"/personalize",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1890:(e,t,r)=>{Promise.resolve().then(r.bind(r,2907))},2907:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(326),a=r(7577),i=r(6557);let l=(0,i.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),o=(0,i.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var n=r(941),d=r(8738);function c(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),[p,x]=(0,a.useState)(""),[h,m]=(0,a.useState)(!0),[g,f]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),v=e=>{(!b||window.confirm("You have unsaved changes. Are you sure you want to switch?"))&&(i(e),x(e.prompt),y(!1))},w=async()=>{if(r&&!g&&b){if(1===r.is_default){alert("Default presets cannot be modified.");return}try{f(!0),await (0,d.sZ)(r.id,{title:r.title,prompt:p}),t(e=>e.map(e=>e.id===r.id?{...e,prompt:p}:e)),y(!1)}catch(e){console.error("Save failed:",e),alert("Failed to save preset. See console for details.")}finally{f(!1)}}},j=async()=>{let e=prompt("Enter a title for the new preset:");if(e)try{f(!0);let{id:r}=await (0,d.lx)({title:e,prompt:"Enter your custom prompt here..."}),s={id:r,uid:"current_user",title:e,prompt:"Enter your custom prompt here...",is_default:0,created_at:Date.now(),sync_state:"clean"};t(e=>[...e,s]),i(s),x(s.prompt),y(!1)}catch(e){console.error("Failed to create preset:",e),alert("Failed to create preset. See console for details.")}finally{f(!1)}},N=async()=>{if(!r)return;let e=prompt("Enter a title for the duplicated preset:",`${r.title} (Copy)`);if(e)try{f(!0);let{id:r}=await (0,d.lx)({title:e,prompt:p}),s={id:r,uid:"current_user",title:e,prompt:p,is_default:0,created_at:Date.now(),sync_state:"clean"};t(e=>[...e,s]),i(s),y(!1)}catch(e){console.error("Failed to duplicate preset:",e),alert("Failed to duplicate preset. See console for details.")}finally{f(!1)}};return h?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"text-gray-500",children:"Loading..."})}):(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"bg-white border-b border-gray-100",children:s.jsx("div",{className:"px-8 pt-8 pb-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Presets"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Personalize"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:j,disabled:g,className:"px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(l,{className:"h-4 w-4"}),"New Preset"]}),r&&(0,s.jsxs)("button",{onClick:N,disabled:g,className:"px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(o,{className:"h-4 w-4"}),"Duplicate"]}),s.jsx("button",{onClick:w,disabled:g||!b||r?.is_default===1,className:`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${b||g?g?"bg-gray-400 text-white cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-500 text-white cursor-default"}`,children:b||g?g?"Saving...":"Save":"Saved"})]})]})})}),s.jsx("div",{className:`transition-colors duration-300 ${c?"bg-gray-50":"bg-white"}`,children:(0,s.jsxs)("div",{className:"px-8 py-6",children:[s.jsx("div",{className:"mb-6",children:(0,s.jsxs)("button",{onClick:()=>u(!c),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 text-sm font-medium transition-colors",children:[s.jsx(n.Z,{className:`h-4 w-4 transition-transform duration-200 ${c?"rotate-180":""}`}),c?"Hide Presets":"Show Presets"]})}),c&&s.jsx("div",{className:"grid grid-cols-5 gap-4 mb-6",children:e.map(e=>(0,s.jsxs)("div",{onClick:()=>v(e),className:`
                    p-4 rounded-lg cursor-pointer transition-all duration-200 bg-white
                    h-48 flex flex-col shadow-sm hover:shadow-md relative
                    ${r?.id===e.id?"border-2 border-blue-500 shadow-md":"border border-gray-200 hover:border-gray-300"}
                  `,children:[1===e.is_default&&s.jsx("div",{className:"absolute top-2 right-2 bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"Default"}),s.jsx("h3",{className:"font-semibold text-gray-900 mb-3 text-center text-sm",children:e.title}),s.jsx("p",{className:"text-xs text-gray-600 leading-relaxed flex-1 overflow-hidden",children:e.prompt.substring(0,100)+(e.prompt.length>100?"...":"")})]},e.id))})]})}),s.jsx("div",{className:"flex-1 bg-white",children:(0,s.jsxs)("div",{className:"h-full px-8 py-6 flex flex-col",children:[r?.is_default===1&&s.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded-full"}),(0,s.jsxs)("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"This is a default preset and cannot be edited."}),'Use the "Duplicate" button above to create an editable copy, or create a new preset.']})]})}),s.jsx("textarea",{value:p,onChange:e=>{x(e.target.value),y(!0)},className:"w-full flex-1 text-sm text-gray-900 border-0 resize-none focus:outline-none bg-transparent font-mono leading-relaxed",placeholder:"Select a preset or type directly...",readOnly:r?.is_default===1})]})})]})}},8170:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/Users/shreeshanthr/Documents/echomind 3/echomind_web/app/personalize/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[230,808],()=>r(3809));module.exports=s})();