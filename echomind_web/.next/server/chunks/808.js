exports.id=808,exports.ids=[808],exports.modules={4617:(e,t,s)=>{Promise.resolve().then(s.bind(s,6783))},4631:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6783:(e,t,s)=>{"use strict";s.d(t,{default:()=>w});var a=s(326),r=s(7577),i=s(434),l=s(5047),n=s(6226),o=s(941),c=s(1810),d=s(8738),u=s(5955);let m={SIDEBAR:500,TEXT:300,SUBMENU:500,ICON_HOVER:200,COLOR_TRANSITION:200,HOVER_SCALE:200},h=e=>{let[t,s]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s(!0);let e=setTimeout(()=>s(!1),m.SIDEBAR);return()=>clearTimeout(e)},[e]);let a=(0,r.useCallback)((t=0)=>({willChange:"opacity",transition:`opacity ${m.TEXT}ms ease-out`,transitionDelay:`${t}ms`,opacity:e?0:1,pointerEvents:e?"none":"auto"}),[e]),i=(0,r.useCallback)(t=>({willChange:"opacity, max-height",transition:`all ${m.SUBMENU}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`,maxHeight:e||!t?"0px":"400px",opacity:e||!t?0:1}),[e]);return{isAnimating:t,getTextAnimationStyle:a,getSubmenuAnimationStyle:i,sidebarContainerStyle:(0,r.useMemo)(()=>({willChange:"width",transition:`width ${m.SIDEBAR}ms cubic-bezier(0.4, 0, 0.2, 1)`}),[]),getTextContainerStyle:(0,r.useCallback)(()=>({width:e?"0px":"150px",overflow:"hidden",transition:`width ${m.SIDEBAR}ms cubic-bezier(0.4, 0, 0.2, 1)`}),[e]),getUniformTextStyle:(0,r.useCallback)(()=>({willChange:"opacity",opacity:e?0:1,transition:`opacity 300ms ease ${e?"0ms":"200ms"}`,whiteSpace:"nowrap"}),[e])}},x=(0,r.memo)(({icon:e,isLucide:t,alt:s,className:i="h-[18px] w-[18px] transition-transform duration-200"})=>t?(0,r.createElement)(e,{className:i,"aria-hidden":!0}):a.jsx(n.default,{src:e,alt:s,width:18,height:18,className:i,loading:"lazy"}));x.displayName="IconComponent";let p=(0,r.memo)(({isCollapsed:e,onToggle:t,onSearchClick:s})=>{let p=(0,l.usePathname)(),f=(0,l.useRouter)(),[y,g]=(0,r.useState)(p.startsWith("/settings")),{user:b,isLoading:w}=(0,u.a)(),[v,j]=(0,r.useState)(null),{isAnimating:N,getTextAnimationStyle:S,getSubmenuAnimationStyle:k,sidebarContainerStyle:C,getTextContainerStyle:E,getUniformTextStyle:L}=h(e);(0,r.useEffect)(()=>{(0,d.ud)().then(e=>j(e.hasApiKey)).catch(e=>{console.error("Failed to check API key status:",e),j(null)})},[]),(0,r.useEffect)(()=>{p.startsWith("/settings")&&g(!0)},[p]);let R=(0,r.useMemo)(()=>[{name:"Search",action:s,icon:"/search.svg",isLucide:!1,ariaLabel:"Open search"},{name:"My Activity",href:"/activity",icon:"/activity.svg",isLucide:!1,ariaLabel:"View my activity"},{name:"Personalize",href:"/personalize",icon:"/book.svg",isLucide:!1,ariaLabel:"Personalization settings"},{name:"Settings",href:"/settings",icon:"/setting.svg",isLucide:!1,hasSubmenu:!0,ariaLabel:"Settings menu"}],[s]),I=(0,r.useMemo)(()=>[{name:"Personal Profile",href:"/settings",icon:"/user.svg",isLucide:!1,ariaLabel:"Personal profile settings"}],[]);(0,r.useMemo)(()=>[],[]);let U=(0,r.useCallback)(()=>{t(!e)},[e,t]),P=(0,r.useCallback)(()=>{p.startsWith("/settings")||g(e=>!e)},[p]),O=(0,r.useCallback)(async()=>{try{await (0,d.kS)()}catch(e){console.error("An error occurred during logout:",e)}},[]),A=(0,r.useCallback)((e,t)=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),t?.())},[]),T=(0,r.useCallback)((t,s)=>{let r=!!t.href&&p.startsWith(t.href),l=`
      group flex items-center rounded-[8px] px-[12px] py-[10px] text-[14px] text-[#282828] w-full relative
      transition-colors duration-${m.COLOR_TRANSITION} ease-out
      focus:outline-none
    `,n=e=>e?"bg-[#f2f2f2] text-[#282828]":"text-[#282828] hover:text-[#282828] hover:bg-[#f7f7f7]";return t.action?a.jsx("li",{children:(0,a.jsxs)("button",{onClick:t.action,onKeyDown:e=>A(e,t.action),className:`${l} ${n(!1)}`,title:e?t.name:void 0,"aria-label":t.ariaLabel||t.name,style:{willChange:"background-color, color"},children:[a.jsx("div",{className:"shrink-0 flex items-center justify-center w-5 h-5",children:a.jsx(x,{icon:t.icon,isLucide:t.isLucide,alt:`${t.name} icon`})}),a.jsx("div",{className:"ml-[12px] overflow-hidden",style:E(),children:a.jsx("span",{className:"block text-left",style:L(),children:t.name})})]})},t.name):t.hasSubmenu?(0,a.jsxs)("li",{children:[(0,a.jsxs)("button",{onClick:P,onKeyDown:e=>A(e,P),className:`${l} ${n(r)}`,title:e?t.name:void 0,"aria-label":t.ariaLabel||t.name,"aria-expanded":y,"aria-controls":"settings-submenu",style:{willChange:"background-color, color"},children:[a.jsx("div",{className:"shrink-0 flex items-center justify-center w-5 h-5",children:a.jsx(x,{icon:t.icon,isLucide:t.isLucide,alt:`${t.name} icon`})}),(0,a.jsxs)("div",{className:"ml-[12px] overflow-hidden flex items-center",style:E(),children:[a.jsx("span",{className:"flex-1 text-left",style:L(),children:t.name}),a.jsx(o.Z,{className:"h-3 w-3 ml-1.5 shrink-0","aria-hidden":"true",style:{willChange:"transform, opacity",transition:`all ${m.HOVER_SCALE}ms cubic-bezier(0.4, 0, 0.2, 1)`,transform:`rotate(${y?180:0}deg) ${e?"scale(0)":"scale(1)"}`,opacity:e?0:1}})]})]}),a.jsx("div",{id:"settings-submenu",className:"overflow-hidden",style:k(y),role:"region","aria-labelledby":"settings-button",children:(0,a.jsxs)("ul",{className:"mt-[4px] space-y-0 pl-[22px]",role:"menu",children:[I.map((e,t)=>a.jsx("li",{role:"none",children:(0,a.jsxs)(i.default,{href:e.href,className:`
                                  group flex items-center rounded-lg px-[12px] py-[8px] text-[13px] gap-x-[9px]
                      focus:outline-none
                                  ${p===e.href?"bg-subtle-active-bg text-[#282828]":"text-[#282828] hover:text-[#282828] hover:bg-[#f7f7f7]"}
                      transition-colors duration-${m.COLOR_TRANSITION} ease-out
                                `,style:{willChange:"background-color, color"},role:"menuitem","aria-label":e.ariaLabel||e.name,children:[a.jsx(x,{icon:e.icon,isLucide:e.isLucide,alt:`${e.name} icon`,className:"h-4 w-4 shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:e.name})]})},e.name)),Z&&a.jsx("li",{role:"none",children:(0,a.jsxs)("button",{onClick:O,onKeyDown:e=>A(e,O),className:`
                                    group flex items-center rounded-lg px-[12px] py-[8px] text-[13px] gap-x-[9px]
                                    text-red-600 hover:text-red-700 hover:bg-[#f7f7f7] w-full 
                                    transition-colors duration-${m.COLOR_TRANSITION} ease-out
                                    focus:outline-none
                                  `,style:{willChange:"background-color, color"},role:"menuitem","aria-label":"Logout",children:[a.jsx(c.Z,{className:"h-4 w-4 shrink-0","aria-hidden":"true"}),a.jsx("span",{className:"whitespace-nowrap",children:"Logout"})]})})]})})]},t.name):a.jsx("li",{children:(0,a.jsxs)(i.default,{href:t.href||"#",className:`
                        group flex items-center rounded-[8px] text-[14px] px-[12px] py-[10px] relative
            focus:outline-none
            ${n(r)}
            transition-colors duration-${m.COLOR_TRANSITION} ease-out
                        
                      `,title:e?t.name:void 0,"aria-label":t.ariaLabel||t.name,style:{willChange:"background-color, color"},children:[a.jsx("div",{className:"shrink-0 flex items-center justify-center w-5 h-5",children:a.jsx(x,{icon:t.icon,isLucide:t.isLucide,alt:`${t.name} icon`})}),a.jsx("div",{className:"ml-[12px] overflow-hidden",style:E(),children:a.jsx("span",{className:"block text-left",style:L(),children:t.name})})]})},t.name)},[p,e,y,P,O,A,L,E,k,I]),$=(0,r.useCallback)(()=>w?"Loading...":b?.display_name||"Guest",[b,w]),D=(0,r.useCallback)(()=>w?"L":b?.display_name?b.display_name.charAt(0).toUpperCase():"G",[b,w]),Z=b&&"default_user"!==b.uid;return(0,a.jsxs)("aside",{className:`flex h-full flex-col bg-white border-r py-3 px-2 border-[#e5e5e5] relative ${e?"w-[60px]":"w-[220px]"}`,style:C,role:"navigation","aria-label":"main navigation","aria-expanded":!e,children:[a.jsx("header",{className:"group relative h-6 flex shrink-0 items-center justify-between",children:e?a.jsx("button",{onClick:U,onKeyDown:e=>A(e,U),className:" text-gray-500 hover:text-gray-800 p-1 rounded-[4px] hover:bg-[#f7f7f7] h-6 w-6 transition-colors focus:outline-none","aria-label":"Open sidebar",children:a.jsx(n.default,{src:"/unfold.svg",alt:"Open sidebar",width:18,height:18,className:"h-4.5 w-4.5"})}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.default,{href:"https://echomind.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:a.jsx("span",{className:"ml-3 text-[14px] leading-none text-[#000]",children:"EchoMind"})}),a.jsx("button",{onClick:U,onKeyDown:e=>A(e,U),className:" text-gray-500 hover:text-gray-800 p-1 rounded-[4px] hover:bg-[#f7f7f7] h-6 w-6 transition-colors focus:outline-none","aria-label":"Close sidebar",children:a.jsx(n.default,{src:"/unfold.svg",alt:"Close",width:16,height:16,className:"transform rotate-180"})})]})}),(0,a.jsxs)("nav",{className:"flex flex-1 flex-col pt-8",role:"navigation","aria-label":"Main menu",children:[a.jsx("ul",{role:"list",className:"flex flex-1 flex-col",children:a.jsx("li",{children:a.jsx("ul",{role:"list",className:"",children:R.map(T)})})}),a.jsx("button",{onClick:U,onKeyDown:e=>A(e,U),className:`${e?"":"opacity-0"} "absolute inset-0 flex items-center justify-center w-full h-[36px] mb-[8px] rounded-[20px] flex justify-center items-center text-gray-500 hover:text-gray-800 rounded-md scale-90 group-hover:opacity-100 group-hover:scale-100 transition-all duration-300 ease-out focus:outline-none`,"aria-label":"Open sidebar",children:a.jsx("div",{className:"w-[36px] h-[36px] flex items-center justify-center bg-[#f7f7f7] rounded-[20px]",children:a.jsx(n.default,{src:"/unfold.svg",alt:"Open",width:18,height:18,className:"h-4.5 w-4.5"})})}),!e&&null!==v&&a.jsx("div",{className:"px-2.5 py-2 text-center",children:a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${v?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:v?"Local running":"EchoMind Free System"})}),a.jsx("div",{className:"mt-[0px] flex items-center w-full h-[1px] px-[4px] mt-[8px] mb-[8px]",children:a.jsx("div",{className:"w-full h-[1px] bg-[#d9d9d9]"})}),(0,a.jsxs)("div",{className:`mt-[0px] flex items-center ${e?"":"gap-x-[10px]"}`,style:{padding:"6px 8px",justifyContent:"flex-start",transition:`all ${m.SIDEBAR}ms cubic-bezier(0.4, 0, 0.2, 1)`},role:"region","aria-label":"User profile",children:[a.jsx("div",{className:`
              h-[30px] w-[30px] rounded-full border border-[#8d8d8d] flex items-center justify-center text-[#282828] text-[13px] 
              shrink-0 cursor-pointer transition-all duration-${m.ICON_HOVER} 
              hover:bg-[#f7f7f7] focus:outline-none
            `,title:$(),style:{willChange:"background-color, transform"},tabIndex:0,role:"button","aria-label":`User: ${$()}`,onKeyDown:e=>A(e,()=>{Z?f.push("/settings"):f.push("/login")}),children:D()}),a.jsx("div",{className:"ml-[0px] overflow-hidden",style:E(),children:a.jsx("span",{className:"block text-[13px] leading-6 text-[#282828]",style:L(),children:$()})})]})]})]})});p.displayName="Sidebar";var f=s(8307),y=s(4019),g=s(617);function b({isOpen:e,onClose:t}){let[s,i]=(0,r.useState)(""),[n,o]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),m=(0,r.useRef)(null),h=(0,l.useRouter)(),x=async e=>{if(!e.trim()){o([]);return}u(!0);try{let t=await (0,d.lS)(e);o(t)}catch(e){console.error("Search failed:",e),o([])}finally{u(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-start justify-center pt-16 z-50",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center px-4 py-3",children:[a.jsx(f.Z,{className:"h-5 w-5 text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{ref:m,type:"text",value:s,onChange:e=>{let t=e.target.value;i(t),x(t)},placeholder:"Search...",className:"flex-1 text-gray-900 text-base border-0 focus:outline-none placeholder-gray-400 bg-transparent"}),a.jsx("button",{onClick:t,className:"ml-3 p-1 hover:bg-gray-100 rounded-full flex-shrink-0",children:a.jsx(y.Z,{className:"h-4 w-4 text-gray-400"})})]}),a.jsx("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx("span",{children:"Type"}),a.jsx("span",{className:"mx-2 px-1.5 py-0.5 bg-white border border-gray-200 rounded text-xs font-mono",children:"#"}),a.jsx("span",{children:"to access summaries,"}),a.jsx("span",{className:"mx-2 px-1.5 py-0.5 bg-white border border-gray-200 rounded text-xs font-mono",children:"?"}),a.jsx("span",{children:"for help."})]})}),s&&a.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:c?(0,a.jsxs)("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Searching..."})]}):n.length>0?a.jsx("div",{className:"divide-y divide-gray-100",children:n.map(e=>{let s=new Date(1e3*e.started_at).toLocaleString();return a.jsx("div",{className:"p-3 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{h.push(`/activity/${e.id}`),t()},children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(g.Z,{className:"h-5 w-5 text-gray-400 mt-0.5 shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1 truncate",children:e.title||"Untitled Conversation"}),a.jsx("div",{className:"flex items-center gap-2 mt-2",children:a.jsx("span",{className:"text-xs text-gray-500",children:s})})]})]})},e.id)})}):(0,a.jsxs)("div",{className:"p-6 text-center",children:[a.jsx(f.Z,{className:"h-8 w-8 text-gray-300 mx-auto mb-3"}),(0,a.jsxs)("p",{className:"text-gray-500 text-sm",children:['No results found for "',s,'"']})]})})]})}):null}function w({children:e}){let[t,s]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"flex h-screen",children:[a.jsx(p,{isCollapsed:t,onToggle:s,onSearchClick:()=>l(!0)}),a.jsx("main",{className:"flex-1 overflow-auto bg-white",children:e}),a.jsx(b,{isOpen:i,onClose:()=>l(!1)})]})}},8738:(e,t,s)=>{"use strict";s.d(t,{ud:()=>k,lx:()=>E,tm:()=>C,SO:()=>v,Oo:()=>N,Rx:()=>w,kS:()=>R,ks:()=>S,lS:()=>b,ps:()=>f,sZ:()=>L,Lj:()=>j});var a=s(1262),r=s(76);class i{static async createUser(e,t){let s=(0,r.JU)(a.RZ,"users",e);await (0,r.pl)(s,{...t,createdAt:(0,r.Bt)()})}static async getUser(e){let t=(0,r.JU)(a.RZ,"users",e),s=await (0,r.QT)(t);return s.exists()?s.data():null}static async updateUser(e,t){let s=(0,r.JU)(a.RZ,"users",e);await (0,r.r7)(s,t)}static async deleteUser(e){let t=(0,r.qs)(a.RZ),s=(0,r.hJ)(a.RZ,"users",e,"sessions");for(let i of(await (0,r.PL)(s)).docs){let s=i.id,l=(0,r.hJ)(a.RZ,"users",e,"sessions",s,"transcripts");(await (0,r.PL)(l)).docs.forEach(e=>t.delete(e.ref));let n=(0,r.hJ)(a.RZ,"users",e,"sessions",s,"aiMessages");(await (0,r.PL)(n)).docs.forEach(e=>t.delete(e.ref));let o=(0,r.JU)(a.RZ,"users",e,"sessions",s,"summary","data");t.delete(o),t.delete(i.ref)}let i=(0,r.hJ)(a.RZ,"users",e,"promptPresets");(await (0,r.PL)(i)).docs.forEach(e=>t.delete(e.ref));let l=(0,r.JU)(a.RZ,"users",e);t.delete(l),await t.commit()}}class l{static async createSession(e,t){let s=(0,r.hJ)(a.RZ,"users",e,"sessions");return(await (0,r.ET)(s,{...t,startedAt:(0,r.Bt)()})).id}static async getSession(e,t){let s=(0,r.JU)(a.RZ,"users",e,"sessions",t),i=await (0,r.QT)(s);return i.exists()?i.data():null}static async getSessions(e){let t=(0,r.hJ)(a.RZ,"users",e,"sessions"),s=(0,r.IO)(t,(0,r.Xo)("startedAt","desc"));return(await (0,r.PL)(s)).docs.map(e=>({id:e.id,...e.data()}))}static async updateSession(e,t,s){let i=(0,r.JU)(a.RZ,"users",e,"sessions",t);await (0,r.r7)(i,s)}static async deleteSession(e,t){let s=(0,r.qs)(a.RZ),i=(0,r.hJ)(a.RZ,"users",e,"sessions",t,"transcripts");(await (0,r.PL)(i)).docs.forEach(e=>s.delete(e.ref));let l=(0,r.hJ)(a.RZ,"users",e,"sessions",t,"aiMessages");(await (0,r.PL)(l)).docs.forEach(e=>s.delete(e.ref));let n=(0,r.JU)(a.RZ,"users",e,"sessions",t,"summary","data");s.delete(n);let o=(0,r.JU)(a.RZ,"users",e,"sessions",t);s.delete(o),await s.commit()}}class n{static async createPreset(e,t){let s=(0,r.hJ)(a.RZ,"users",e,"promptPresets");return(await (0,r.ET)(s,{...t,createdAt:(0,r.Bt)()})).id}static async getPresets(e){let t=(0,r.hJ)(a.RZ,"users",e,"promptPresets"),s=(0,r.IO)(t,(0,r.Xo)("createdAt","desc"));return(await (0,r.PL)(s)).docs.map(e=>({id:e.id,...e.data()}))}static async updatePreset(e,t,s){let i=(0,r.JU)(a.RZ,"users",e,"promptPresets",t);await (0,r.r7)(i,s)}static async deletePreset(e,t){let s=(0,r.JU)(a.RZ,"users",e,"promptPresets",t);await (0,r.oe)(s)}}let o=()=>!1,c=e=>1e3*e.seconds+Math.floor(e.nanoseconds/1e6),d=(e,t)=>({id:e.id,uid:t,title:e.title,session_type:e.session_type,started_at:c(e.startedAt),ended_at:e.endedAt?c(e.endedAt):void 0,sync_state:"clean",updated_at:c(e.startedAt)}),u="",m=async()=>{try{let e=await fetch("/runtime-config.json");if(e.ok){let t=await e.json();return console.log("✅ Runtime config loaded:",t),t.API_URL}}catch(e){console.log("⚠️ Failed to load runtime config:",e)}return null},h=!1,x=async()=>{if(h)return;let e=await m();if(e){u=e,h=!0;return}console.log("\uD83D\uDCCD Using fallback API URL:",u),h=!0},p=()=>null,f=(e,t=!1)=>{},y=()=>{let e={"Content-Type":"application/json"},t=p();return t?.uid&&(e["X-User-ID"]=t.uid),e},g=async(e,t={})=>{h||await x();let s=`${u}${e}`;return console.log("\uD83C\uDF10 apiCall (Local Mode):",{path:e,API_ORIGIN:u,fullUrl:s,initialized:h,timestamp:new Date().toISOString()}),fetch(s,{headers:{"Content-Type":"application/json",...y(),...t.headers||{}},...t})},b=async e=>{if(!e.trim())return[];if(o())return(await w()).filter(t=>t.title.toLowerCase().includes(e.toLowerCase()));{let t=await g(`/api/conversations/search?q=${encodeURIComponent(e)}`,{method:"GET"});if(!t.ok)throw Error("Failed to search conversations");return t.json()}},w=async()=>{if(o()){let e=a.I8.currentUser.uid;return(await l.getSessions(e)).map(t=>d(t,e))}{let e=await g("/api/conversations",{method:"GET"});if(!e.ok)throw Error("Failed to fetch sessions");return e.json()}},v=async e=>{if(o()){let t=a.I8.currentUser.uid;await l.deleteSession(t,e)}else if(!(await g(`/api/conversations/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete session")},j=async e=>{if(o()){let t=a.I8.currentUser.uid;await i.updateUser(t,{displayName:e.displayName})}else if(!(await g("/api/user/profile",{method:"PUT",body:JSON.stringify(e)})).ok)throw Error("Failed to update user profile")},N=async e=>{if(o()){let t=a.I8.currentUser.uid;return await i.getUser(t)||await i.createUser(t,{displayName:e.display_name,email:e.email}),e}{let t=await g("/api/user/find-or-create",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to find or create user");return t.json()}},S=async e=>{if(o()){console.log("API key is not needed in Firebase mode");return}if(!(await g("/api/user/api-key",{method:"POST",body:JSON.stringify({apiKey:e})})).ok)throw Error("Failed to save API key")},k=async()=>{if(o())return{hasApiKey:!0};{let e=await g("/api/user/api-key-status",{method:"GET"});if(!e.ok)throw Error("Failed to check API key status");return e.json()}},C=async()=>{if(o()){let e=a.I8.currentUser.uid;await i.deleteUser(e),await a.I8.currentUser.delete()}else if(!(await g("/api/user/profile",{method:"DELETE"})).ok)throw Error("Failed to delete account")},E=async e=>{if(o()){let t=a.I8.currentUser.uid;return{id:await n.createPreset(t,{title:e.title,prompt:e.prompt,isDefault:!1})}}{let t=await g("/api/presets",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create preset");return t.json()}},L=async(e,t)=>{if(o()){let s=a.I8.currentUser.uid;await n.updatePreset(s,e,{title:t.title,prompt:t.prompt})}else{let s=await g(`/api/presets/${e}`,{method:"PUT",body:JSON.stringify(t)});if(!s.ok){let e=await s.text();throw Error(`Failed to update preset: ${s.status} ${e}`)}}},R=async()=>{if(o()){let{signOut:e}=await Promise.resolve().then(s.bind(s,8108));await e(a.I8)}f(null),localStorage.removeItem("openai_api_key"),localStorage.removeItem("user_info"),window.location.href="/login"}},5955:(e,t,s)=>{"use strict";s.d(t,{a:()=>c,g:()=>d});var a=s(7577),r=s(5047),i=s(8738),l=s(1262),n=s(8108);let o={uid:"default_user",display_name:"Default User",email:"contact@echomind.com"},c=()=>{let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=(0,n.Aj)(l.I8,async e=>{if(e){console.log("\uD83D\uDD25 Firebase mode activated:",e.uid),d("firebase");let s={uid:e.uid,display_name:e.displayName||"User",email:e.email||"no-email@example.com"};try{s=await (0,i.Oo)(s),console.log("✅ Firestore user created/verified:",s)}catch(e){console.error("❌ Firestore user creation/verification failed:",e)}t(s),(0,i.ps)(s)}else console.log("\uD83C\uDFE0 Local mode activated"),d("local"),t(o),(0,i.ps)(o);r(!1)});return()=>e()},[]),{user:e,isLoading:s,mode:c}},d=()=>{let{user:e,isLoading:t}=c(),s=(0,r.useRouter)();return(0,a.useEffect)(()=>{},[e,t,s]),e}},1262:(e,t,s)=>{"use strict";s.d(t,{I8:()=>n,RZ:()=>o});var a=s(2585),r=s(8108),i=s(76);let l=(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)({apiKey:"AIzaSyAgtJrmsFWG1C7m9S55HyT1laICEzuUS2g",authDomain:"echomind-3651a.firebaseapp.com",projectId:"echomind-3651a",storageBucket:"echomind-3651a.firebasestorage.app",messagingSenderId:"904706892885",appId:"1:904706892885:web:0e42b3dda796674ead20dc",measurementId:"G-SQ0WM6S28T"}),n=(0,r.v0)(l),o=(0,i.ad)(l)},5392:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>n});var a=s(9510),r=s(5384),i=s.n(r);s(7272);let l=(0,s(8570).createProxy)(String.raw`/Users/shreeshanthr/Documents/echomind 3/echomind_web/components/ClientLayout.tsx#default`),n={title:"EchoMind - AI Assistant",description:"EchoMind - Personalized AI Assistant for various contexts"};function o({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:i().className,children:a.jsx(l,{children:e})})})}},7272:()=>{}};